#mysql 锁
>这里只有说明 间隙锁、排它锁（写锁）、共享锁（读锁）、意向锁

> 注：这里锁信息偏向 innodb 

排它锁（写锁）与 共享锁（读所）
------------------------------

> mysql默认事务隔离级别是 RR 级别，默认select上共享锁（最好声明select 上排它锁）update delete上排它锁

#### 1.排它锁

+ 概念 

> 一旦数据表被加上写锁，其他请求无法在对该表增加读锁和写锁。

>

+ 语句

> 在查询语句后面增加 **FOR UPDATE** ,Mysql 会对查询结果中的每一行都加上排它锁，
其他线程对着写进行申请排它锁或者共享锁，阻塞等待。

```sql
SELECT ... FOR UPDATE;
```
#### 2.共享锁

+ 概念 

> 共享锁又称读锁，是读取操作创建的锁。其他用户可以并发读取数
据，但任何事务都不能对数据进行修改（获取数据上的排他锁），直到已释放所有共享锁。

> **注意：** 共享可以重复添加，直到已释放所有共享锁。这样会造成死锁（当两个事务
同时上共享锁后都进行写的操作，由于无法释放全部的共享锁会造成死锁）。

+ 语句

> 在查询语句后面增加LOCK IN SHARE MODE，Mysql会对查询结果中的每行都加共享锁，
当没有其他线程对查询结果集中的任何一行使用排他锁时，可以成功申请共享锁，否则会被阻塞。
其他线程也可以读取使用了共享锁的表，而且这些线程读取的是同一个版本的数据。

```sql
SELECT .... LOCK IN SHARE MODE;
```

意向锁（意向共享锁 意向排他锁）
------------------------------